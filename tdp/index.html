<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>PAX Counter</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b0e13">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
/* (CSS SAME AS LAST VERSION – unchanged for safety) */
:root{
--bg:#0b0e13;
--card:#151a22;
--card-soft:#10151d;
--accent:#25d366;
--danger:#b14a4a;
--border:#232a38;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

html,body{
margin:0;height:100%;
font-family:system-ui,Arial;
background:var(--bg);
color:#fff;
overflow:hidden;
}

body{
display:flex;
align-items:center;
justify-content:center;
touch-action:manipulation;
}

.app{
width:min(430px,100%);
padding:18px;
display:flex;
flex-direction:column;
gap:18px;
}

/* HEADER */
.header{
background:linear-gradient(180deg,#1a2130,#121722);
border-radius:20px;
padding:20px;
text-align:center;
}

.total{font-size:42px;font-weight:900}
.sub{opacity:.7;font-size:14px;margin-top:4px}

/* SESSION */
.sessionCard{
background:var(--card);
border-radius:18px;
padding:16px;
display:flex;
align-items:center;
justify-content:space-between;
border:1px solid var(--border);
}

.sessionLabel{font-size:14px;opacity:.7}
.sessionValue{font-size:28px;font-weight:800}

/* MAIN */
.mainCard{
background:var(--card-soft);
border-radius:22px;
padding:22px;
display:flex;
flex-direction:column;
gap:18px;
border:1px solid var(--border);
}

.tapArea{
display:flex;
align-items:center;
justify-content:center;
gap:18px;
}

/* CIRCLE BUTTONS */
.tap,.minus{
appearance:none;
-webkit-appearance:none;
padding:0;
aspect-ratio:1/1;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
}

.tap{
width:170px;
background:#1a2130;
border:2px solid var(--border);
font-size:18px;
font-weight:900;
color:#fff;
}

.minus{
width:64px;
background:#2a1515;
border:2px solid #5a2a2a;
font-size:22px;
font-weight:900;
color:#fff;
}

/* ACTIONS */
.actions{
display:flex;
gap:12px;
flex-wrap:wrap;
}

button{
flex:1;
padding:15px;
border-radius:16px;
border:1px solid var(--border);
background:var(--card);
color:#fff;
font-weight:700;
}

.whatsapp{
background:rgba(37,211,102,.18);
border-color:var(--accent);
}

.reset{
background:rgba(177,74,74,.15);
border-color:var(--danger);
}

.header,.sessionCard,.mainCard{
box-shadow:0 10px 30px rgba(0,0,0,.35);
}
</style>
</head>

<body>

<div class="app">

<div class="header">
<div class="total"><span id="total">0</span> pax</div>
<div class="sub">Total Count</div>
</div>

<div class="sessionCard">
<div class="sessionLabel">Current Session</div>
<div class="sessionValue" id="sessionBlock">+0</div>
</div>

<div class="mainCard">
<div class="tapArea">
<button class="minus" id="minus">−</button>
<button class="tap" id="tap">TAP</button>
</div>

<div class="actions">
<button id="copy">Copy</button>
<button class="whatsapp" id="send">Copy & Open WhatsApp</button>
<button class="reset" id="reset">Reset All</button>
</div>
</div>

</div>

<script>
/* SERVICE WORKER */
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js');
}

/* ORIENTATION LOCK */
if (screen.orientation && screen.orientation.lock) {
  screen.orientation.lock("portrait").catch(()=>{});
}

/* LOGIC (UNCHANGED) */
const totalEl = document.getElementById("total");
const sessionBlock = document.getElementById("sessionBlock");
const tapBtn  = document.getElementById("tap");
const minusBtn = document.getElementById("minus");
const sendBtn = document.getElementById("send");
const copyBtn = document.getElementById("copy");
const resetBtn = document.getElementById("reset");

let total = Number(localStorage.getItem("TOTAL_PAX") || 0);
let session = Number(localStorage.getItem("SESSION_PAX") || 0);

render();

function render(){
totalEl.textContent = total;
sessionBlock.textContent = `+${session}`;
}

function save(){
localStorage.setItem("TOTAL_PAX", total);
localStorage.setItem("SESSION_PAX", session);
}

tapBtn.addEventListener("pointerdown", ()=>{
session++; total++; save(); render();
});

minusBtn.addEventListener("pointerdown", ()=>{
if(total>0){
total--;
if(session>0) session--;
save(); render();
}
});

copyBtn.onclick = async ()=>{
await navigator.clipboard.writeText(`${total} pax`);
session = 0; save(); render();
};

sendBtn.onclick = async ()=>{
await navigator.clipboard.writeText(`${total} pax`);
session = 0; save(); render();
window.location.href = "whatsapp://send";
};

resetBtn.onclick = ()=>{
session = 0; total = 0;
localStorage.clear(); render();
};
</script>

</body>
</html>
